<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SC Component Tracker</title>
    <link rel="stylesheet" href="styles.css?v=81">
        <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-star' viewBox='0 0 16 16'><path d='M2.866 14.85c-.1.6.5 1.1 1.1.8l5.034-2.6 5.034 2.6c.6.3 1.2-.2 1.1-.8l-1-5.9 4.5-4.1c.5-.5.2-1.4-.5-1.5l-5.9-.5-2.5-5.1c-.3-.6-1.1-.6-1.4 0L8 3.1 5.5 0c-.3-.6-1.1-.6-1.4 0L2.6 5.1l-5.9.5c-.7.1-1 .9-.5 1.5l4.5 4.1-1 5.9z'/></svg>">
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="header-row">
                <div class="header-title">
                    <h1>SC Component Tracker</h1>
                    <span id="appVersion" class="app-version" data-tooltip="Click to copy version" aria-label="Application version"></span>
                    <a href="README.md" class="about-btn" target="_blank">About</a>
                    <button type="button" id="checkUpdateBtn" class="about-btn update-btn">Check for Update</button>
                </div>
                <button id="openStorageListBtn" class="btn btn-secondary">My Stored Components</button>
            </div>
            <div class="header-row">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search components..." autocomplete="off">
                    <div id="searchResults" class="search-results hidden"></div>
                </div>
                <button type="button" id="voiceBtn" class="voice-btn" title="Voice Commands">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                        <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                    </svg>
                    <div class="voice-waves">
                        <span></span><span></span><span></span>
                    </div>
                </button>
                <div class="data-actions">
                    <button id="exportBtn" class="btn btn-secondary">Export File</button>
                    <button id="importBtn" class="btn btn-secondary">Import File</button>
                    <input type="file" id="importFileInput" accept=".json" class="hidden">
                </div>
            </div>
        </header>

        <main class="main-content">
            <!-- Ships Section -->
            <section class="section ships-section">
                <div class="section-header">
                    <h2 id="shipsHeading">MY SHIPS</h2>
                    <button id="addShipBtn" class="btn btn-primary">+ Add Ship</button>
                </div>
                <div id="shipsList" class="ships-list">
                    <!-- Ships will be rendered here -->
                </div>
            </section>
        </main>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <!-- Ship Modal -->
    <div id="shipModal" class="modal hidden">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="shipModalTitle">Add Ship</h3>
                <div class="modal-header-actions">
                    <button type="button" id="saveShipTopBtn" class="btn btn-primary btn-small">Save Ship</button>
                    <button class="modal-close" data-modal="shipModal">&times;</button>
                </div>
            </div>
            <form id="shipForm">
                <input type="hidden" id="shipId">

                <div class="form-row">
                    <div class="form-group form-group-grow">
                        <label for="shipName">Ship</label>
                        <select id="shipName" required>
                            <option value="">Select a ship...</option>
                            <!-- Populated by JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="shipNickname">Nickname (optional)</label>
                        <input type="text" id="shipNickname" placeholder="e.g., My Hauler">
                    </div>
                </div>

                <div id="shipSlotsInfo" class="ship-slots-info hidden">
                    <!-- Shows ship's available slots after selection -->
                </div>

                <div class="form-section">
                    <h4>Pilot Weapons</h4>
                    <p class="form-hint" id="pilotWeaponsHint">Select a ship to see available hardpoints</p>
                    <div id="pilotWeaponSlots" class="component-slots">
                        <!-- Pilot weapon dropdowns added by JS based on ship -->
                    </div>
                </div>

                <div class="form-section">
                    <h4>Turrets</h4>
                    <p class="form-hint" id="turretsHint">Select a ship to see available turrets</p>
                    <div id="turretSlots" class="component-slots">
                        <!-- Turret dropdowns added by JS based on ship -->
                    </div>
                </div>

                <div class="form-section">
                    <h4>Coolers</h4>
                    <p class="form-hint" id="coolersHint">Select a ship to see available slots</p>
                    <div id="coolerSlots" class="component-slots">
                        <!-- Cooler dropdowns added by JS -->
                    </div>
                </div>

                <div class="form-section">
                    <h4>Power Plants</h4>
                    <p class="form-hint" id="powerPlantsHint">Select a ship to see available slots</p>
                    <div id="powerPlantSlots" class="component-slots">
                        <!-- Power plant dropdowns added by JS -->
                    </div>
                </div>

                <div class="form-section">
                    <h4>Quantum Drive</h4>
                    <p class="form-hint" id="quantumDriveHint">Select a ship to see available slot</p>
                    <div id="quantumDriveSlots" class="component-slots">
                        <!-- QD dropdown added by JS -->
                    </div>
                </div>

                <div class="form-section">
                    <h4>Shield Generators</h4>
                    <p class="form-hint" id="shieldsHint">Select a ship to see available slots</p>
                    <div id="shieldSlots" class="component-slots">
                        <!-- Shield dropdowns added by JS -->
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-modal="shipModal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Ship</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Storage List Modal -->
    <div id="storageListModal" class="modal hidden">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Components in Storage</h3>
                <div class="modal-header-actions">
                    <button type="button" id="addStorageBtn" class="btn btn-primary btn-small">+ Add Component</button>
                    <button class="modal-close" data-modal="storageListModal">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div id="storageList" class="storage-list">
                    <!-- Storage items will be rendered here, grouped by type -->
                </div>
            </div>
        </div>
    </div>

    <!-- Storage Modal -->
    <div id="storageModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="storageModalTitle">Add Component to Storage</h3>
                <button class="modal-close" data-modal="storageModal">&times;</button>
            </div>
            <form id="storageForm">
                <input type="hidden" id="storageIndex">
                <div class="form-group">
                    <label for="storageType">Component Type</label>
                    <select id="storageType" required>
                        <option value="">Select type...</option>
                        <option value="weapons">Weapon</option>
                        <option value="shields">Shield Generator</option>
                        <option value="powerPlants">Power Plant</option>
                        <option value="coolers">Cooler</option>
                        <option value="quantumDrives">Quantum Drive</option>
                    </select>
                </div>
                <div class="form-group hidden" id="storageSizeGroup">
                    <label for="storageSize">Size</label>
                    <select id="storageSize">
                        <option value="">Select size...</option>
                        <!-- Populated based on type -->
                    </select>
                </div>
                <div class="form-group" id="storageComponentGroup">
                    <label for="storageComponent">Component</label>
                    <select id="storageComponent">
                        <option value="">Select a component...</option>
                        <!-- Populated based on type/size selection -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="storageQuantity">Quantity</label>
                    <input type="number" id="storageQuantity" required min="1" value="1">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-modal="storageModal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Component</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="modal hidden">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Confirm Delete</h3>
                <button class="modal-close" data-modal="deleteModal">&times;</button>
            </div>
            <p id="deleteMessage">Are you sure you want to delete this item?</p>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" data-modal="deleteModal">Cancel</button>
                <button type="button" id="confirmDeleteBtn" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>

    <!-- Update Modal -->
    <div id="updateModal" class="modal hidden">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Ship Data Update</h3>
                <button class="modal-close" data-modal="updateModal">&times;</button>
            </div>
            <div id="updateMessage" class="update-message">
                <!-- Update info will be rendered here -->
            </div>
            <div class="form-actions" id="updateActions">
                <button type="button" class="btn btn-secondary" data-modal="updateModal">Cancel</button>
                <button type="button" id="confirmUpdateBtn" class="btn btn-primary">Update Now</button>
            </div>
        </div>
    </div>

    <!-- Import Confirmation Modal -->
    <div id="importConfirmModal" class="modal hidden">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Import Data</h3>
                <button class="modal-close" data-modal="importConfirmModal">&times;</button>
            </div>
            <div id="importMessage" class="import-message">
                <!-- Import summary will be rendered here -->
            </div>
            <div class="form-actions import-actions">
                <button type="button" class="btn btn-secondary" data-modal="importConfirmModal">Cancel</button>
                <button type="button" id="importMergeBtn" class="btn btn-secondary">Merge</button>
                <button type="button" id="importReplaceBtn" class="btn btn-danger">Replace All</button>
            </div>
        </div>
    </div>

    <!-- Voice Settings Modal -->
    <div id="voiceModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Voice Commands Setup</h3>
                <button class="modal-close" data-modal="voiceModal">&times;</button>
            </div>
            <div class="modal-body">
                <p class="voice-intro">Enable voice commands to control the app hands-free. You'll need an API key from one of these providers:</p>

                <div class="form-group">
                    <label for="voiceProvider">AI Provider</label>
                    <select id="voiceProvider">
                        <option value="">Select provider...</option>
                        <option value="openai">OpenAI (GPT-4o-mini)</option>
                        <option value="anthropic">Anthropic (Claude Haiku)</option>
                        <option value="google">Google (Gemini Flash)</option>
                    </select>
                </div>

                <div class="form-group" id="apiKeyGroup" style="display: none;">
                    <label for="voiceApiKey">API Key</label>
                    <div class="api-key-input">
                        <input type="password" id="voiceApiKey" placeholder="Paste your API key here">
                        <button type="button" id="toggleApiKeyBtn" class="btn-icon" title="Show/Hide">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </button>
                    </div>
                    <p class="form-hint">Your key is stored locally and never sent to our servers.</p>
                </div>

                <div id="voiceProviderInfo" class="provider-info" style="display: none;">
                    <!-- Provider-specific info populated by JS -->
                </div>

                <div id="voiceStatus" class="voice-status" style="display: none;">
                    <div class="status-indicator"></div>
                    <span class="status-text">Ready</span>
                </div>

                <div class="voice-commands-help" style="display: none;" id="voiceCommandsHelp">
                    <h4>Example Commands</h4>
                    <ul>
                        <li>"Add a Gladius to my fleet"</li>
                        <li>"Edit my Carrack"</li>
                        <li>"Replace cooler with Arctic"</li>
                        <li>"How many Lightstrike cannons do I have in storage?"</li>
                        <li>"Show my storage"</li>
                    </ul>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" data-modal="voiceModal">Cancel</button>
                <button type="button" id="saveVoiceSettingsBtn" class="btn btn-primary" disabled>Enable Voice</button>
            </div>
        </div>
    </div>

<script src="data.js?v=81"></script>
    <script src="app.js?v=81"></script>
    <script src="voice.js?v=81"></script>
</body>
</html>
