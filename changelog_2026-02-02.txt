Changelog - 2026-02-02 (v0.70)
===============================

Branch: main

Summary:
--------
Fixed F7A Hornet Mk II missing weapons (nose turret and ball turret).

Changes:
--------
1. Fixed Anvil F7A Hornet Mk II ship spec:
   - Added 2x S3 nose turret guns to pilotWeapons (now 4 total: 2x S4 wing + 2x S3 nose)
   - Added ball turret as a remote turret with 2x S3 guns
   - Ball turret (C5-173f) is pilot-controlled but swappable to TMSB-5

2. Fixed Hornet F7A Mk II PYAM Exec ship spec:
   - Same hardpoint changes as base variant

3. Fixed Hornet F7A Mk II PYAM Exec stock loadout:
   - Added missing pilot weapons (Revenant Gatling x2, NDB-30 Repeater x2)
   - Added missing turret weapons (NDB-30 Repeater x2)

4. Updated extract-ships.js to handle pilot-controlled turrets:
   - extractPilotWeapons() now handles Turret.CanardTurret (nose turrets)
     by counting their weapons as pilot weapons
   - extractTurrets() now handles Turret.BallTurret as a "remote" turret
   - This ensures future ships with similar setups are correctly extracted

Technical Notes:
----------------
- CanardTurret (nose turret): Fixed pilot-controlled turret, guns count as pilot weapons
- BallTurret: Pilot-controlled but swappable, tracked as "remote" turret
- The sync script only adds new ships, so manual fixes won't be overwritten

Files Modified:
---------------
- app.js - Version 0.67 -> 0.70
- index.html - Cache-busting v=67 -> v=70
- data.js - Fixed F7A Hornet Mk II and PYAM Exec ship specs and loadouts
- scripts/extract-ships.js - Handle CanardTurret and BallTurret types

---

Changelog - 2026-02-02 (v0.71)
===============================

Summary:
--------
Added Compact View toggle for hangar display.

Changes:
--------
1. Added Compact View / Detail View toggle button:
   - Button appears next to "# in hangar" text in the MY SHIPS header
   - Clicking toggles between "Compact View" and "Detail View"
   - Compact View shows only ship names with Edit/Delete buttons (one line per ship)
   - Detail View shows full component details (default behavior)

2. CSS additions:
   - .view-toggle-btn styling to match header aesthetic
   - .ships-list.compact-view hides .ship-components
   - Reduced margins in compact mode for tighter display

Files Modified:
---------------
- app.js - Version 0.70 -> 0.71, added toggleViewMode() and isCompactView state
- index.html - Cache-busting v=70 -> v=71
- styles.css - Added compact view styles

---

Changelog - 2026-02-02 (v0.72)
===============================

Summary:
--------
Fixed ship hardpoint extraction bugs and removed "Kruger" prefix from ship names.

Changes:
--------
1. Fixed pilot weapons over-counting in extract-ships.js:
   - Was matching hardpoint_class_* which included missile racks and module mounts
   - Now only counts Turret.GunTurret (gimbals), WeaponGun.Gun, or hardpoint_gun_*
   - F7C Hornet Mk I: 8 pilot weapons -> 2 (correct)

2. Fixed turret weapons double-counting in extract-ships.js:
   - Was counting both gimbal mount AND gun inside = 2x actual count
   - Hurricane turret: 8 guns -> 4 (correct)
   - Hammerhead: 48 guns -> 24 (correct: 6 turrets x 4 guns)

3. Removed "Kruger" prefix from Kruger ship names:
   - "Kruger L-21 Wolf" -> "L-21 Wolf"
   - "Kruger L-22 Alpha Wolf" -> "L-22 Alpha Wolf"
   - "Kruger P-52 Merlin" -> "P-52 Merlin"
   - "Kruger P-72 Archimedes" -> "P-72 Archimedes"
   - Updated both ship specs and stockLoadouts keys

Files Modified:
---------------
- app.js - Version 0.71 -> 0.72
- index.html - Cache-busting v=71 -> v=72
- data.js - Fixed ship specs (142 ships), renamed Kruger ships
- scripts/extract-ships.js - Fixed hardpoint counting bugs

---

TODO for Next Session:
======================
1. Component size extraction bug:
   - Ships like L-21, L-22, Perseus, Polaris have shields/powerPlants with size: 0
   - Need to investigate extractComponents() in extract-ships.js
   - Root cause: scunpacked data may store sizes differently

2. Stock loadout incomplete data:
   - Hurricane shows 1/4 turret weapons (should be 4)
   - Many ships have fewer weapons than hardpoints in scunpacked data
   - May need to filter updates to not overwrite user data with incomplete loadouts

3. Add "Kruger" to NAME_NORMALIZATIONS in update-from-scunpacked.js:
   - Strip "Kruger" prefix from ship names during extraction
